<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cinemax</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css" type="text/css">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="/">Home</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/schedule">Schedule</a>
                    </li>
                    <% if (req.session.authenticated) { %>
                    <li class="nav-item">
                        <a class="nav-link" href="/auth/logout">Logout</a>
                    </li>
                    <%} else if(!req.session.authenticated){%>
                    <li class="nav-item">
                        <a class="nav-link" href="/auth/login">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/auth/signup">Signup</a>
                    </li>
                    <% } %>
                </ul>
            </div>
        </nav>
    </header>
    <div class="container">
        <h2>Current Movies</h2>
        <div class="row">
            <% currentMovies.forEach(movie => { %>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-img-container">
                        <img src="<%= movie.poster %>" class="card-img-top poster" alt="<%= movie.title %>">
                        <div class="overlay">
                            <a href="#" class="btn btn-info btn-sm movie-info" role="button">Info</a>
                        </div>
                        <div class="movie-title">
                            <h5 class="card-title"><%= movie.title %></h5>
                        </div>
                    </div>
                </div>
            </div>
            <% }); %>
        </div>
        <h2>Upcoming Movies</h2>
        <div class="row">
            <% upcomingMovies.forEach(movie => { %>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-img-container">
                        <img src="<%= movie.poster %>" class="card-img-top poster" alt="<%= movie.title %>">
                        <div class="overlay">
                            <button class="btn btn-info btn-sm movie-info" role="button" onclick="showInfo(<%= movie.cast %>)">Info</button>
                        </div>
                        <div class="movie-title">
                            <h5 class="card-title"><%= movie.title %></h5>
                        </div>
                    </div>
                </div>
            </div>
            <% }); %>
        </div>
    </div>
    <footer class="footer mt-auto py-3">
        <div class="container">
            <span class="text-muted">&copy; 2024 Cinemax</span>
        </div>
    </footer>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>

<script>
    function showMovieInfo(cast) {
        // Get the overlay elements
        var overlays = document.querySelectorAll('.overlay');

        // Loop through each overlay
        overlays.forEach(function (overlay) {
            // Hide all existing cast elements
            var existingCast = overlay.querySelector('.movie-cast');
            if (existingCast) {
                existingCast.remove();
            }

            // Create new cast element and append to overlay
            var castElement = document.createElement('div');
            castElement.classList.add('movie-cast');
            castElement.textContent = "Cast: " + cast;
            overlay.appendChild(castElement);
        });
    }
</script>